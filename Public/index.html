<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Confirme presença — Nosso Casamento</title>
  <style>
    body{font-family:Inter,Arial;margin:40px;background:#fbf9fc;color:#333}
    .card{background:white;border-radius:12px;padding:28px;max-width:900px;margin:auto;box-shadow:0 8px 30px rgba(10,8,20,0.06)}
    label{display:block;margin-top:12px;font-weight:600}
    input, textarea, select{width:100%;padding:12px;border-radius:8px;border:1px solid #eee;margin-top:6px}
    button{margin-top:18px;padding:10px 16px;border-radius:10px;background:#7e5ca6;color:#fff;border:0}
    #msg{margin-top:12px;color:#555}
  </style>
</head>
<body>
  <div class="card">
    <h1>Confirmar Presença (RSVP)</h1>
    <p>Digite seu nome completo. Se estiver na lista autorizada, você poderá confirmar.</p>

    <label>Nome completo
      <input id="nome" placeholder="Seu nome completo"/>
    </label>

    <label>Você irá ao evento?
      <select id="confirmado">
        <option value="">Escolha</option>
        <option value="sim">Sim</option>
        <option value="nao">Não</option>
        <option value="talvez">Talvez</option>
      </select>
    </label>

    <label>Adultos (incluindo você)
      <input id="adultos" type="number" min="1" max="10" value="1"/>
    </label>

    <label>Crianças
      <input id="criancas" type="number" min="0" max="10" value="0"/>
    </label>

    <label>E-mail (opcional)
      <input id="email" placeholder="exemplo@email.com"/>
    </label>

    <label>Observações (opcional)
      <textarea id="obs" rows="3" placeholder="restrições alimentares, observações..."></textarea>
    </label>

    <button id="enviar">Enviar</button>
    <div id="msg"></div>
  </div>

  <!-- Firebase compat (simples de usar em sites estáticos) -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

  <script>
    // SUA firebaseConfig (copiada do console)
    const firebaseConfig = {
      apiKey: "AIzaSyCvMuKYdUnE9ckMt82rmJ2AV0tFtIRmKKs",
      authDomain: "casamento-maria-henrique.firebaseapp.com",
      projectId: "casamento-maria-henrique",
      storageBucket: "casamento-maria-henrique.firebasestorage.app",
      messagingSenderId: "1006994295553",
      appId: "1:1006994295553:web:0ee61ec65794bab8aea900"
    };

    // init compat
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    document.getElementById('enviar').onclick = async () => {
      const nome = document.getElementById('nome').value.trim();
      const confirmado = document.getElementById('confirmado').value;
      const adultos = parseInt(document.getElementById('adultos').value || '1',10);
      const criancas = parseInt(document.getElementById('criancas').value || '0',10);
      const email = document.getElementById('email').value.trim();
      const obs = document.getElementById('obs').value.trim();
      const msg = document.getElementById('msg');

      if(!nome || !confirmado){
        msg.innerText = 'Preencha seu nome e escolha se vai ao evento.';
        return;
      }
      try{
        await db.collection('rsvps').add({
          nome, confirmado, adultos, criancas, email, obs,
          criadoEm: firebase.firestore.FieldValue.serverTimestamp()
        });
        msg.innerText = 'Obrigado! Sua resposta foi registrada.';
        document.getElementById('nome').value = '';
        document.getElementById('confirmado').value = '';
        document.getElementById('email').value = '';
        document.getElementById('obs').value = '';
      }catch(err){
        console.error(err);
        msg.innerText = 'Erro ao enviar — tente novamente.';
      }
    }
  </script>
</body>
</html>
